<notebook-timelines>
    <div class="timeline_container" if="{!hidden}">
        <notebook-timeline each="{note in opts.notebooks}" if="{parent.opts.latestnotebook._id === note._id}" notebook="{note}" latest="{parent.opts.latestnotebook}"></notebook-timeline>
        <div class="btn_group" style="position: fixed; top: {300}px">
            <div id="prev_page_btn" onclick="{onPrevPageClick}" class="route_btn" style="float:left">上</div>
            <div id="next_page_btn" onclick="{onNextPageClick}" class="route_btn" style="float: right">下</div>
        </div>
        <note-confirm></note-confirm>
    </div>
    <style>
        .timeline_container{
            overflow: hidden;
        }
        .btn_group{
            width: 100%;
            position: fixed;
        }
        .route_btn{
            width:40px;
            height: 40px;
            background: red;
        }
    </style>
    <script>
        var self = this;
        self.hidden = true;
        self.currentState = 'view';
        app.on('viewMode', function(e){
            self.trigger('viewMode');
            self.currentState = 'view';
        });
        app.on('addNewNote', function(e){
            self.trigger('addNewNote');
        });
        self.onPrevPageClick = function(e){
            var currentIndex = self.opts.notebooks.map(function(notebook){return notebook._id}).indexOf(self.opts.latestnotebook._id);
            if(!self.opts.notebooks[currentIndex-1]){
                return;
            }
            self.latestNotebook = self.opts.notebooks[currentIndex-1];
            riot.route('timeline/_' + self.opts.latestnotebook._id);
        };
        self.onNextPageClick = function(e){
            var currentIndex = self.opts.notebooks.map(function(notebook){return notebook._id}).indexOf(self.opts.latestnotebook._id);
            if(!self.opts.notebooks[currentIndex+1]){
                return;
            }
            self.opts.latestnotebook = self.opts.notebooks[currentIndex+1];
            riot.route('timeline/_' + self.opts.latestnotebook._id);
        };
        self.on('mount', function(){
            console.log(self.opts)
        });

    </script>
</notebook-timelines>